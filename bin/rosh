#!/usr/bin/env ruby



arg = ARGV.pop

if arg == '--irb'
  require 'irb'
  require_relative '../lib/rosh'
  IRB.setup '../lib/rosh'

  def r
    @r ||= Rosh.new
  end

  r.add_host('192.168.33.100', :centos5, user: 'vagrant',
    keys: [Dir.home + '/.vagrant.d/insecure_private_key'])

  r.add_host('192.168.33.102', :deb, user: 'vagrant',
    keys: [Dir.home + '/.vagrant.d/insecure_private_key'])

  r.add_host('192.168.33.104', :freebsd, user: 'sloveless')

  r.add_host('192.168.33.105', :gentoo, user: 'vagrant',
    keys: [Dir.home + '/.vagrant.d/insecure_private_key'])

  r.add_host('192.168.33.110', :ubuntu, user: 'vagrant',
    keys: [Dir.home + '/.vagrant.d/insecure_private_key'])

  r.add_host('localhost', :local)

  r.add_host('sloveless-lin.pelco.org', :lin, user: 'sloveless')

  IRB.start
else
  require_relative '../lib/rosh/cli'

  if ARGV.include? '--log'
    Rosh::CLI.log = true
    Rosh::Host::LocalShell.log = true
    Rosh::Host::RemoteShell.log = true
  end

  Rosh::CLI.run
end




